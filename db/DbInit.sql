-- Create the database
CREATE DATABASE 'C:\\Users\\zvirecis\\Documents\\Visual Studio 2022\\Projects\\BookDb\\db\\BOOKSDB.fdb'
USER 'SYSDBA' PASSWORD 'masterkey'
DEFAULT CHARACTER SET UTF8;

-- Create the Publisher table
CREATE TABLE Publisher (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(255) CHARACTER SET UTF8 NOT NULL
);

-- Create the Author table
CREATE TABLE Author (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(255) CHARACTER SET UTF8 NOT NULL,
    surname VARCHAR(255) CHARACTER SET UTF8 NOT NULL
);

-- Create the Book table
CREATE TABLE Book (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    title VARCHAR(255) CHARACTER SET UTF8 NOT NULL,
    description BLOB SUB_TYPE TEXT CHARACTER SET UTF8,
    keywords VARCHAR(500) CHARACTER SET UTF8,
    author_id INTEGER NOT NULL,
    release_date DATE,
    pages INTEGER,
    publisher_id INTEGER NOT NULL,
    FOREIGN KEY (author_id) REFERENCES Author (id) ON DELETE CASCADE,
    FOREIGN KEY (publisher_id) REFERENCES Publisher (id) ON DELETE CASCADE
);

